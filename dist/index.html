<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Your Website</title>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="http://caldwell.github.io/renderjson/renderjson.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#1" style="padding: 5px;">
            <img alt="Brand" src="https://signalwire.com/assets/svg/logo-afed6fcc46ec30df0871f3b8b02408a59907739b850af31fbeb4bcef8a503017.svg" style="height: 40px;">
          </a>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <button id="connect" type="button" class="btn btn-info">Connect</button>
        </div>
        <div id="json-preview" class="col-md-6">
          <div class="alert alert-success" role="alert">
            Click "Connect" to start!
          </div>
        </div>
      </div>
    </div>

    <script>
      var _sw = null
      var updateJson = function (json) {
        renderjson.set_icons('[open]', '[close]')
        $('#json-preview').html(renderjson(json))
      }
      window.onunload = function () {
        if (_sw) {
          // _sw.disconnect() // TODO
        }
      }
      window.onload = function () {
        document.getElementById('connect').onclick = function () {
          updateJson({ test: 'json preview' })
          _sw = new SignalWire({
            authentication: { project: '06f784c6-6bd5-47fb-9897-407d66551333', token: 'PT2eddbccd77832e761d191513df8945d4e1bf70e8f3f74aaa' },
            socket: { address: 'wss://localhost:2100' },
            callbacks: {
              // onSocketOpen: function (session) {
              //   console.log('onSocketOpen ???', session)
              // },
              // onSocketClose: function (session) {
              //   console.log('onSocketClose ???', session)
              // },
              // onSocketError: function (session) {
              //   console.log('onSocketError ???', session)
              // },
              // onMessageInbound: function (session, result) {
              //   console.log('onMessageInbound ???', session, result)
              // },
              onSessionReady: function (session, error) {
                console.log('onSessionReady ???', session, error)
                _sw.subscribe('bench', ['swbench', 'swbench2'])
              }
            }
          })
        }
      }
    </script>

    <script src="./bundle.js"></script>

  </body>
</html>